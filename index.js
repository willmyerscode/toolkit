!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.wmToolkit=t():e.wmToolkit=t()}(this,(()=>(()=>{"use strict";var e={d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{default:()=>$});var o={};e.r(o),e.d(o,{collectionData:()=>i,getFragment:()=>a,getHTML:()=>s,handleAddingMissingColorTheme:()=>v,initializeCodeBlocks:()=>p,initializeEmbedBlocks:()=>h,initializeThirdPartyPlugins:()=>g,reloadSiteBundle:()=>l,reloadSquarespaceLifecycle:()=>u});var n={};e.r(n),e.d(n,{debounce:()=>q,deepMerge:()=>x,emitEvent:()=>E,parseAttr:()=>T,throttle:()=>k});var r={};async function s(e,t="main#page"){try{const o=await fetch(e);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const n=await o.text();return(new DOMParser).parseFromString(n,"text/html").querySelector(t).innerHTML}catch(e){return console.error("Error fetching URL:",e),""}}e.r(r),e.d(r,{initializeAllPlugins:()=>C,initializeTabsPlugin:()=>A,setImageFocalPoints:()=>d});const c={portfolio:"portfolio",store:"store",blog:"blog",event:"event",lessons:"video",course:"course"};async function i(e){const t=[];let o=null,n=null,r=null;const i=async e=>{try{const a=await async function(e){const t=e.includes("?")?`${e}&cb=${Date.now()}`:`${e}?cb=${Date.now()}`,o=await fetch(t);if(!o.ok)throw new Error(`Fetch error: ${o.statusText}`);return o.json()}(e),l=a.items;o=a.collection,n=a.website,r=function(e){for(const t in c)if(e.includes(t))return c[t];return null}(o.typeLabel),l.length&&"portfolio-item"===l[0].recordTypeLabel&&await async function(e){const t=e.map((e=>s(`${e.fullUrl}?cb=${Date.now()}`))),o=await Promise.all(t);e.forEach(((e,t)=>e.body=o[t]))}(l),t.push(...l),a.pagination?.nextPage&&await i(a.pagination.nextPageUrl+"&format=json&cb="+Date.now())}catch(e){throw console.error("Fetch operation failed:",e),e}};try{return await i(e+"?format=json"),{collection:o,website:n,items:t,type:r}}catch(e){console.error("Error refreshing data:",e)}}async function a(e,t="main#page"){try{const o=await fetch(e);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const n=await o.text();return(new DOMParser).parseFromString(n,"text/html").querySelector(t)}catch(e){return console.error("Error fetching URL:",e),""}}async function l(){return new Promise(((e,t)=>{const o=document.querySelector('script[src*="https://static1.squarespace.com/static/vta"]');if(!o)return void t(new Error("Site bundle script not found"));const n=o.parentNode,r=o.nextSibling;n.removeChild(o);const s=document.createElement("script");s.src=o.src,s.async=!0,s.onload=e,s.onerror=t,r?n.insertBefore(s,r):n.appendChild(s)}))}function d(e=document){e.querySelectorAll("img[data-image-focal-point]").forEach((e=>{const t=e.getAttribute("data-image-focal-point");if(t){const[o,n]=t.split(",").map(Number),r=`${100*o}% ${100*n}%`;e.style.setProperty("--wm-focal-point",r)}}))}async function u(e=document){const t=Array.isArray(e)?e:[e];if(t.forEach((e=>{d(e)})),void 0===window.Squarespace||void 0===window.Y)return void console.warn("Squarespace or Y is not available on the window object. Aborting reloadSquarespaceLifecycle.");const o=document.querySelectorAll("[data-controller]"),n=new Map;o.forEach((e=>{t.some((t=>t.contains(e)))||(n.set(e,e.getAttribute("data-controller")),e.removeAttribute("data-controller"))})),await l(),t.forEach((e=>{!async function(e){const t=e.querySelectorAll(".page-section:has(.section-border .sqs-video-background-native)"),o=(e.querySelectorAll('.page-section:has(.section-border [data-config-url*="vimeo.com"])'),e.querySelectorAll('.page-section:has(.section-border [data-config-url*="youtube.com"])'),[...t,...e.querySelectorAll(".sqs-block-video:has(.native-video-player)")]);e.querySelectorAll('.sqs-block-video:has([data-html*="vimeo.com"])'),e.querySelectorAll('.sqs-block-video:has([data-html*="youtube.com"])'),o.length&&o.forEach((e=>{e.$wmPlay=()=>{const t=e.querySelector("video");t&&(t.play(),e.$wmVideoIsPlaying=!0)},e.$wmPause=()=>{const t=e.querySelector("video");t&&(t.pause(),e.$wmVideoIsPlaying=!1)}}))}(e),async function(e){document.querySelector("style#wm-shape-block-styles")||e.querySelector(".website-component-block")&&function(){const e=document.createElement("style");e.id="wm-shape-block-styles",e.type="text/css",e.appendChild(document.createTextNode('\n    .sqs-block[data-definition-name="website.components.shape"] svg.sqs-shape {\n      fill: var(--shape-block-background-color);\n      stroke: var(--shape-block-stroke-color);\n    }\n    .sqs-block[data-definition-name="website.components.shape"] .sqs-shape-rectangle {\n      background: var(--shape-block-background-color);\n      border-color: var(--shape-block-stroke-color);\n    }\n    .sqs-block[data-definition-name="website.components.shape"] .sqs-block-content,\n    .sqs-block[data-definition-name="website.components.shape"] .sqs-block-alignment-wrapper {\n      height: 100%;\n    }\n    .sqs-block[data-definition-name="website.components.shape"] .sqs-block-alignment-wrapper {\n      display: flex;\n    }\n    .sqs-block[data-definition-name="website.components.shape"] .sqs-shape {\n      display: block;\n      position: absolute;\n      overflow: visible;\n    }\n    .sqs-block[data-definition-name="website.components.shape"] .sqs-shape-block-container {\n      position: relative;\n      color: var(--shape-block-dropshadow-color);\n    }')),document.head.appendChild(e)}()}(e),async function(e){const t=e.querySelectorAll(".sqs-add-to-cart-button");if(!(t.length>0))return;const o=document.querySelectorAll('[data-afterpay="true"]'),n=window.Static?.SQUARESPACE_CONTEXT,r=n?.websiteSettings?.storeSettings?.merchandisingSettings?.displayNativeProductReviewsEnabled;t.forEach((e=>{const t=e.cloneNode(!0);e.parentNode.replaceChild(t,e)})),o.forEach((e=>e.removeAttribute("data-afterpay"))),n?.websiteSettings?.storeSettings?.merchandisingSettings&&(n.websiteSettings.storeSettings.merchandisingSettings.displayNativeProductReviewsEnabled=!1),"undefined"!=typeof Y&&Y.Squarespace&&Y.Squarespace.Commerce?Y.Squarespace.Commerce.initializeCommerce():console.warn("Squarespace Commerce object not found. Commerce initialization skipped."),o.forEach((e=>e.setAttribute("data-afterpay","true"))),n?.websiteSettings?.storeSettings?.merchandisingSettings&&(n.websiteSettings.storeSettings.merchandisingSettings.displayNativeProductReviewsEnabled=r)}(e),Squarespace.initializeWebsiteComponent(Y,Y.one(e))})),Squarespace.globalInit(Y,Y.all()),n.forEach(((e,t)=>{t.setAttribute("data-controller",e)}))}async function p(e){const t=e.querySelectorAll(".sqs-block-code");for(const e of t){const t=e.querySelectorAll("script");for(const e of t)e.src?await m(e):f(e)}}function f(e){try{const t=document.createElement("script");t.textContent=e.textContent,e.parentNode.replaceChild(t,e)}catch(e){console.error("Error executing inline script:",e)}}function m(e){return new Promise(((t,o)=>{const n=document.createElement("script");n.src=e.src,n.onload=t,n.onerror=o;for(const t of e.attributes)"src"!==t.name&&n.setAttribute(t.name,t.value);e.parentNode.replaceChild(n,e)}))}async function h(e){const t=e.querySelectorAll(".sqs-block-embed");for(const e of t)await b(e)}async function b(e){const t=e.getAttribute("data-block-json");if(t)try{const o=JSON.parse(t).html;if(!o)return void console.error("No HTML content found in the JSON data");const n=document.createElement("div");n.innerHTML=o,e.innerHTML="",e.appendChild(n);const r=n.querySelectorAll("script");for(const e of r)e.src?await y(e):w(e)}catch(e){console.error("Error processing the embed block:",e)}else console.error("No data-block-json attribute found")}function w(e){try{const t=document.createElement("script");t.textContent=e.textContent,e.parentNode.replaceChild(t,e)}catch(e){console.error("Error executing inline script:",e)}}function y(e){return new Promise(((t,o)=>{const n=document.createElement("script");n.src=e.src,n.onload=t,n.onerror=o;for(const t of e.attributes)"src"!==t.name&&n.setAttribute(t.name,t.value);e.parentNode.replaceChild(n,e)}))}async function g(e){e.querySelector('a[href*="#lightbox"]')&&"function"==typeof window.pluginLightbox&&window.pluginLightbox()}const S=['[data-section-theme="white"]','[data-section-theme="white-bold"]','[data-section-theme="light"]','[data-section-theme="light-bold"]','[data-section-theme="bright"]','[data-section-theme="bright-inverse"]','[data-section-theme="dark"]','[data-section-theme="dark-bold"]','[data-section-theme="black"]','[data-section-theme="black-bold"]'];async function v(){try{const e=await fetch("/site.css"),t=await e.text(),o=new CSSStyleSheet;o.replaceSync(t);const n=new Set;for(const e of o.cssRules)e.selectorText&&S.forEach((t=>{e.selectorText.includes(t)&&n.add(t)}));const r=S.find((e=>!n.has(e)));let s=0,c="";for(const e of o.cssRules)if(e.selectorText&&e.selectorText.startsWith(":root")&&(s++,2===s)){for(let t=0;t<e.style.length;t++){const o=e.style[t];c+=`${o}: ${e.style.getPropertyValue(o)}; `}break}if(s<2&&console.log("There is no second :root rule in the stylesheet."),r){const e=new CSSStyleSheet;e.insertRule(`:root, ${r} { ${c} }`,0);let t="";for(const o of e.cssRules)t+=o.cssText+"\n";const o=document.createElement("style");o.textContent=t;const n=document.querySelector('link[href$="site.css"]');n?n.parentNode.insertBefore(o,n):console.error("Could not find the existing stylesheet link element.")}else console.log("All expected selectors are present in the stylesheet.")}catch(e){console.error("Error processing stylesheet:",e)}}function q(e,t){let o;return function(...n){clearTimeout(o),o=setTimeout((()=>{clearTimeout(o),e.apply(this,n)}),t)}}function k(e,t){let o,n;return(...r)=>{const s=this;n?(clearTimeout(o),o=setTimeout((()=>{Date.now()-n>=t&&(e.apply(s,r),n=Date.now())}),t-(Date.now()-n))):(e.apply(s,r),n=Date.now())}}function E(e,t={},o=document){if(!e)return;let n=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:t});return o.dispatchEvent(n)}function T(e){if("true"===e)return!0;if("false"===e)return!1;const t=parseFloat(e);return isNaN(t)||t.toString()!==e?e:t}function x(...e){function t(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function o(e,n){for(let[r,s]of Object.entries(n)){let n=t(s);"object"===n||"array"===n?(void 0===e[r]&&(e[r]="object"===n?{}:[]),o(e[r],s)):e[r]=s}}if(0===e.length)return{};let n={};return e.forEach((e=>{o(n,e)})),n}function A(){window.wmTabs&&"function"==typeof window.wmTabs.init&&window.wmTabs.init()}function C(){A()}const P="1.0.1",$=(()=>{const e={...o,...n,...r,version:P};return void 0!==window.wm$&&window.wm$.version&&window.wm$.version>P?window.wm$:(window.wm$=e,e)})();return t})()));
